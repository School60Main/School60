{% extends 'base.html' %}
{% block title %}–£—á–∏—Ç–µ–ª—å - –ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<div class="row">
  <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–∞—à–±–æ—Ä–¥–∞ -->
  <div class="col-md-6 mb-4">
    <div class="card p-3">
      <h3>–í–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
      <ul class="list-unstyled">
        <li><a href="{% url 'awards:award_list' %}" class="btn btn-primary btn-sm mb-2">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a></li>
        <li><a href="{% url 'awards:award_create' %}" class="btn btn-primary btn-sm">–î–æ–±–∞–≤–∏—Ç—å</a></li>
      </ul>
    </div>
  </div>

  <div class="col-md-6 mb-4">
    <div class="card p-3">
      <h3>–û–±—ä—è–≤–ª–µ–Ω–∏—è</h3>
      <ul class="list-unstyled">
        <li><a href="{% url 'announcements:announcement_list' %}" class="btn btn-primary btn-sm mb-2">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a></li>
      </ul>
    </div>
  </div>

  <div class="col-md-6 mb-4">
    <div class="card p-3">
      <h3>–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h3>
      <ul class="list-unstyled">
        <li><a href="{% url 'events:event_list' %}" class="btn btn-primary btn-sm">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a></li>
      </ul>
    </div>
  </div>

  <div class="col-md-6 mb-4">
    <div class="card p-3">
      <h3>–ó–∞–º–µ–Ω—ã</h3>
      <ul class="list-unstyled">
        <li><a href="{% url 'substitutions:substitution_list' %}" class="btn btn-primary btn-sm">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a></li>
      </ul>
    </div>
  </div>

  <div class="col-md-6 mb-4">
    <div class="card p-3">
      <h3>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
      <ul class="list-unstyled">
        <li><a href="{% url 'notifications:list_notifications' %}" class="btn btn-primary btn-sm">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a></li>
      </ul>
    </div>
  </div>

  <div class="col-md-6 mb-4">
    <div class="card p-3">
      <h3>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</h3>
      <ul class="list-unstyled">
        <li><a href="{% url 'materials:material_list' %}" class="btn btn-primary btn-sm">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a></li>
      </ul>
    </div>
  </div>

  <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
  {% if announcements %}
  <div class="mt-4">
      <h5 class="mb-3">üì¢ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h5>
      <div class="list-group">
          {% for announcement in announcements %}
          <div class="list-group-item list-group-item-action d-flex align-items-start shadow-sm mb-2 rounded">
              {% if announcement.image %}
              <img src="{{ announcement.image.url }}" alt="{{ announcement.title }}" class="me-3 rounded" style="width:60px; height:60px; object-fit:cover;">
              {% endif %}
              <div>
                  <h6 class="mb-1">{{ announcement.title }}</h6>
                  <small class="text-muted">{{ announcement.created_at|date:"d.m.Y H:i" }}</small>
                  <p class="mb-0 text-truncate" style="max-width:400px;">{{ announcement.content }}</p>
              </div>
          </div>
          {% endfor %}
      </div>
  </div>
  {% endif %}
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
{% if unread_notifications %}
<div class="modal fade" id="notificationsModal" tabindex="-1" aria-labelledby="notificationsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="notificationsModalLabel">üì¢ –£ –≤–∞—Å –µ—Å—Ç—å –Ω–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
      </div>
      <div class="modal-body">
        <ul class="list-group">
          {% for notification in unread_notifications %}
          <li class="list-group-item d-flex justify-content-between align-items-start">
            <div class="ms-2 me-auto">
              <div class="fw-bold">{{ notification.title }}</div>
              <small class="text-muted">{{ notification.created_at|date:"d.m.Y H:i" }}</small>
              <p class="mb-0">{{ notification.message|truncatechars:100 }}</p>
            </div>
            <a href="{% url 'notifications:notification_detail' notification.id %}" class="btn btn-sm btn-outline-primary">
              –û—Ç–∫—Ä—ã—Ç—å
            </a>
          </li>
          {% endfor %}
        </ul>
      </div>
      <div class="modal-footer">
        <a href="{% url 'notifications:list_notifications' %}" class="btn btn-secondary">–í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</a>
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var myModal = new bootstrap.Modal(document.getElementById('notificationsModal'));
    myModal.show();
  });
</script>
{% endif %}

{% endblock %}
